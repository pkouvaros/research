\documentclass{standalone}

\input{preamble}
\usepackage{graphicx}
\definecolor{navyblue}{RGB}{0,0,128}
\begin{document}

	\begin{tikzpicture}[node distance=2.3cm,  minimum
	  height=0.7cm,font=\scriptsize]

	  \path[fill=white]  (7,-1.7) -- (5.7,1.4) -- (-1.8,1.4)
	  -- (-1.8,-1.2) -- (5.7,-1.2) -- (7,-1.7);


	 \node[draw=navyblue,fill=navyblue!5!white,rectangle,xshift=0cm]
	 (1) {Perception};

	\node[draw=navyblue, fill=navyblue!5!white,rectangle, right of=1,
	xshift=0em, yshift=0cm, inner ysep=0.15cm] (2)
	{Reasoning};

	\node[above of=2, xshift=-1em, yshift=-1.6cm] (l)
	{\includegraphics[width=0.5cm]{agent.png}};

	\node[right of=l, xshift=-4.5em] (l2) {Agent};

	\node[draw=navyblue, fill=navyblue!5!white,rectangle, right
	of=2,xshift=0em, yshift=0cm]  (3) {Action};

	\node[draw=navyblue, fill=navyblue!5!white,rectangle, above of=1,
	xshift=6.7em,yshift=0.3cm,align=left] (5) {Environment};

	%\node[draw=navyblue, fill=navyblue!5!white,rectangle, right
	%of=5] (4) {Plant};
		
	%\node[fit=(1)(2)(3)(l)(l2), line width=0.01em, dashed, rounded corners,
	%inner sep=0.2cm] (s) {};


	  %\node[draw=navyblue,fill=navyblue!5!white,rectangle, 
	  %inner ysep=0.15cm, right of=s, xshift=5cm] (0) {\includegraphics[width=5.5cm]{mas.png}};


	\draw[->,thick] (1) -- (2);	
	\draw[->,thick] (2) -- (3);	
	%\draw[->,thick] (3.north) |- (4.east);	
	\draw[<-,thick] (5) -| (3);
	%\draw[-latex,thick] (4.west) to (5);
	\draw[->,thick] (5.west) -| (1.north);
	
	%\draw[-,line width=0.03cm,green,dotted] (5.7,1.4) -- (7,-1.7);
	%\draw[-,line width=0.03cm,green,dotted] (5.7,1.4) -- (-1.8,1.4);
	%\draw[-,line width=0.03cm,green,dotted] (-1.8,1.3) -- (-1.8,-1.2);
	%\draw[-,line width=0.03cm,green,dotted] (-1.8,-1.2) -- (5.7,-1.2);
	%\draw[-,line width=0.03cm,green,dotted] (5.7,-1.2) -- (7,-1.7);

	\draw[draw=black,rounded corners] (-1.3,-1) rectangle ++(6.9,2.2);	
	\draw[draw=black,rounded corners] (-1.2,-0.9) rectangle ++(6.7,2);	
	%\draw[draw=black,rounded corners] (-1.6,-0.5) rectangle ++(0.3,1);	
	%\draw[draw=black,rounded corners] (5.6,-0.5) rectangle ++(0.3,1);	


	%\node[fit=(0)(1)(4), draw, navyblue, line width=0.1cm, dashed, rounded corners,
	%inner sep=0.2cm] (s) {};


  \end{tikzpicture}
\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "deliverable-wp1.1-m18"
%%% fill-column: 79
%%% End:
